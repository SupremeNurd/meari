<link rel="stylesheet" href="assets/theme_assets/sass/page/_setting.scss">

@@include('./include/_head.html')

<body class="layout-light side-menu">

@@include('./include/_header_menu.html')

<main class="setting-main-content">

    @@include('./include/_sidebar_menu.html')

    <div class="setting-container">
        <section class="setting-section-list">
            <div class="card card-default card-md mb-4">
                <div class="card-body">
                    <div class="tab-wrapper">
                        <div class="dm-tab tab-horizontal">

                            <!--탭 타이틀-->
                            <ul class="nav nav-tabs vertical-tabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="tab-v-1-tab" data-bs-toggle="tab" href="#tab-v-1" role="tab" aria-selected="true">
                                        센서관리
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-v-2-tab" data-bs-toggle="tab" href="#tab-v-2" role="tab" aria-selected="false">
                                        기기관리
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="tab-v-3-tab" data-bs-toggle="tab" href="#tab-v-3" role="tab" aria-selected="false">
                                        방송데이터 관리
                                    </a>
                                </li>
                            </ul>

                            <div class="tab-content">

                                <!-- 센서관리 탭 데이터-->
                                <div class="tab-pane fade show active" id="tab-v-1" role="tabpanel" aria-labelledby="tab-v-1-tab">
                                    <div class="setting-sensor-item">
                                        <div class="d-flex align-items-center">
                                            <div class="sensor-icon-wrapper">
                                                <div class="sensor-icon active">
                                                    <img src="img/sensor_icon/portable_icon.png" alt="센서아이콘" class="sensor-custom-icon">
                                                </div>
                                            </div>
                                            <div class="">
                                                <div class="sensor-details">
                                                    <span class="sensor-status active">연결양호</span>
                                                    <span class="sensor-name">휴대용 센서 1호기</span>
                                                </div>

                                            </div>
                                            <div class="setting-sensor-icons">
                                                <i class="fas fa-signal"></i>
                                                <i class="fas fa-wifi"></i>
                                                <i class="fas fa-battery-three-quarters"></i>
                                                <span>75%</span>
                                            </div>
                                        </div>
                                        <div class="setting-btn-group">
                                            <button type="button" class="pairing-btn" data-bs-toggle="modal" data-bs-target="#pairingModal">
                                                <i class="fas fa-link me-1"></i>
                                                페어링
                                            </button>
                                            <button type="button" class="pairing-btn">
                                                펌웨어 업데이트
                                            </button>
                                        </div>
                                    </div>

                                    <div class="setting-sensor-item">
                                        <div class="d-flex align-items-center">
                                            <div class="sensor-icon-wrapper">
                                                <div class="sensor-icon active">
                                                    <img src="img/sensor_icon/portable_icon.png" alt="센서아이콘" class="sensor-custom-icon">
                                                </div>
                                            </div>
                                            <div class="">
                                                <div class="sensor-details">
                                                    <span class="sensor-status active">연결양호</span>
                                                    <span class="sensor-name">휴대용 센서 2호기</span>
                                                </div>

                                            </div>
                                            <div class="setting-sensor-icons">
                                                <i class="fas fa-signal"></i>
                                                <i class="fas fa-wifi"></i>
                                                <i class="fas fa-battery-three-quarters"></i>
                                                <span>75%</span>
                                            </div>
                                        </div>
                                        <div class="setting-btn-group">
                                            <button type="button" class="pairing-btn" data-bs-toggle="modal" data-bs-target="#pairingModal">
                                                <i class="fas fa-link me-1"></i>
                                                페어링
                                            </button>
                                            <button type="button" class="pairing-btn">
                                                펌웨어 업데이트
                                            </button>
                                        </div>
                                    </div>

                                    <div class="setting-sensor-item">
                                        <div class="d-flex align-items-center">
                                            <div class="sensor-icon-wrapper">
                                                <div class="sensor-icon active">
                                                    <img src="img/sensor_icon/portable_icon.png" alt="센서아이콘" class="sensor-custom-icon">
                                                </div>
                                            </div>
                                            <div class="">
                                                <div class="sensor-details">
                                                    <span class="sensor-status active">연결양호</span>
                                                    <span class="sensor-name">휴대용 센서 3호기</span>
                                                </div>

                                            </div>
                                            <div class="setting-sensor-icons">
                                                <i class="fas fa-signal"></i>
                                                <i class="fas fa-wifi"></i>
                                                <i class="fas fa-battery-three-quarters"></i>
                                                <span>75%</span>
                                            </div>
                                        </div>
                                        <div class="setting-btn-group">
                                            <button type="button" class="pairing-btn" data-bs-toggle="modal" data-bs-target="#pairingModal">
                                                <i class="fas fa-link me-1"></i>
                                                페어링
                                            </button>
                                            <button type="button" class="pairing-btn">
                                                펌웨어 업데이트
                                            </button>
                                        </div>
                                    </div>

                                    <div class="setting-sensor-item">
                                        <div class="d-flex align-items-center">
                                            <div class="sensor-icon-wrapper">
                                                <div class="sensor-icon active">
                                                    <img src="img/sensor_icon/portable_icon.png" alt="센서아이콘" class="sensor-custom-icon">
                                                </div>
                                            </div>
                                            <div class="">
                                                <div class="sensor-details">
                                                    <span class="sensor-status active">연결양호</span>
                                                    <span class="sensor-name">휴대용 센서 4호기</span>
                                                </div>

                                            </div>
                                            <div class="setting-sensor-icons">
                                                <i class="fas fa-signal"></i>
                                                <i class="fas fa-wifi"></i>
                                                <i class="fas fa-battery-three-quarters"></i>
                                                <span>75%</span>
                                            </div>
                                        </div>
                                        <div class="setting-btn-group">
                                            <button type="button" class="pairing-btn" data-bs-toggle="modal" data-bs-target="#pairingModal">
                                                <i class="fas fa-link me-1"></i>
                                                페어링
                                            </button>
                                            <button type="button" class="pairing-btn">
                                                펌웨어 업데이트
                                            </button>
                                        </div>
                                    </div>

                                    <div class="setting-sensor-item">
                                        <div class="d-flex align-items-center">
                                            <div class="sensor-icon-wrapper">
                                                <div class="sensor-icon active">
                                                    <img src="img/sensor_icon/injection_icon.png" alt="센서아이콘" class="sensor-custom-icon">
                                                </div>
                                            </div>
                                            <div class="">
                                                <div class="sensor-details">
                                                    <span class="sensor-status active">연결양호</span>
                                                    <span class="sensor-name">투입형 센서 1호기</span>
                                                </div>

                                            </div>
                                            <div class="setting-sensor-icons">
                                                <i class="fas fa-signal"></i>
                                                <i class="fas fa-wifi"></i>
                                                <i class="fas fa-battery-three-quarters"></i>
                                                <span>75%</span>
                                            </div>
                                        </div>
                                        <div class="setting-btn-group">
                                            <button type="button" class="pairing-btn" data-bs-toggle="modal" data-bs-target="#pairingModal">
                                                <i class="fas fa-link me-1"></i>
                                                페어링
                                            </button>
                                            <button type="button" class="pairing-btn">
                                                펌웨어 업데이트
                                            </button>
                                        </div>
                                    </div>

                                    <div class="setting-sensor-item">
                                        <div class="d-flex align-items-center">
                                            <div class="sensor-icon-wrapper">
                                                <div class="sensor-icon active">
                                                    <img src="img/sensor_icon/injection_icon.png" alt="센서아이콘" class="sensor-custom-icon">
                                                </div>
                                            </div>
                                            <div class="">
                                                <div class="sensor-details">
                                                    <span class="sensor-status active">연결양호</span>
                                                    <span class="sensor-name">투입형 센서 2호기</span>
                                                </div>

                                            </div>
                                            <div class="setting-sensor-icons">
                                                <i class="fas fa-signal"></i>
                                                <i class="fas fa-wifi"></i>
                                                <i class="fas fa-battery-three-quarters"></i>
                                                <span>75%</span>
                                            </div>
                                        </div>
                                        <div class="setting-btn-group">
                                            <button type="button" class="pairing-btn" data-bs-toggle="modal" data-bs-target="#pairingModal">
                                                <i class="fas fa-link me-1"></i>
                                                페어링
                                            </button>
                                            <button type="button" class="pairing-btn">
                                                펌웨어 업데이트
                                            </button>
                                        </div>
                                    </div>

                                    <div class="setting-sensor-item">
                                        <div class="d-flex align-items-center">
                                            <div class="sensor-icon-wrapper">
                                                <div class="sensor-icon active">
                                                    <img src="img/sensor_icon/injection_icon.png" alt="센서아이콘" class="sensor-custom-icon">
                                                </div>
                                            </div>
                                            <div class="">
                                                <div class="sensor-details">
                                                    <span class="sensor-status active">연결양호</span>
                                                    <span class="sensor-name">투입형 센서 3호기</span>
                                                </div>

                                            </div>
                                            <div class="setting-sensor-icons">
                                                <i class="fas fa-signal"></i>
                                                <i class="fas fa-wifi"></i>
                                                <i class="fas fa-battery-three-quarters"></i>
                                                <span>75%</span>
                                            </div>
                                        </div>
                                        <div class="setting-btn-group">
                                            <button type="button" class="pairing-btn" data-bs-toggle="modal" data-bs-target="#pairingModal">
                                                <i class="fas fa-link me-1"></i>
                                                페어링
                                            </button>
                                            <button type="button" class="pairing-btn">
                                                펌웨어 업데이트
                                            </button>
                                        </div>
                                    </div>

                                    <div class="setting-sensor-item">
                                        <div class="d-flex align-items-center">
                                            <div class="sensor-icon-wrapper">
                                                <div class="sensor-icon active">
                                                    <img src="img/sensor_icon/injection_icon.png" alt="센서아이콘" class="sensor-custom-icon">
                                                </div>
                                            </div>
                                            <div class="">
                                                <div class="sensor-details">
                                                    <span class="sensor-status active">연결양호</span>
                                                    <span class="sensor-name">투입형 센서 4호기</span>
                                                </div>

                                            </div>
                                            <div class="setting-sensor-icons">
                                                <i class="fas fa-signal"></i>
                                                <i class="fas fa-wifi"></i>
                                                <i class="fas fa-battery-three-quarters"></i>
                                                <span>75%</span>
                                            </div>
                                        </div>
                                        <div class="setting-btn-group">
                                            <button type="button" class="pairing-btn" data-bs-toggle="modal" data-bs-target="#pairingModal">
                                                <i class="fas fa-link me-1"></i>
                                                페어링
                                            </button>
                                            <button type="button" class="pairing-btn">
                                                펌웨어 업데이트
                                            </button>
                                        </div>
                                    </div>
                                </div>


                                <!-- 기기관리 탭 데이터-->
                                <div class="tab-pane fade" id="tab-v-2" role="tabpanel" aria-labelledby="tab-v-2-tab">
                                    <div class="device-settings-container">

                                        <section class="settings-section-card">
                                            <header class="settings-section-header">
                                                <i class="fas fa-desktop"></i>
                                                <h6>디바이스 정보</h6>
                                            </header>
                                            <div class="settings-section-body">
                                                <div class="settings-info-row">
                                                    <span class="settings-info-label">IP 주소</span>
                                                    <span class="settings-info  -value">192.168.0.1</span>
                                                </div>
                                                <div class="settings-info-row">
                                                    <span class="settings-info-label">펌웨어 버전</span>
                                                    <div class="settings-info-action">
                                                        <span class="settings-info-value">meari 0.001</span>
                                                        <button type="button" class="settings-action-btn">업데이트</button>
                                                    </div>
                                                </div>
                                                <div class="settings-info-row">
                                                    <span class="settings-info-label">현재 시간</span>
                                                    <div class="settings-info-action">
                                                        <span class="settings-info-value">오전 12:35:42</span>
                                                        <button type="button" class="settings-action-btn">시간수정</button>
                                                    </div>
                                                </div>
                                                <div class="settings-info-row">
                                                    <span class="settings-info-label">Wi-Fi</span>
                                                    <div class="settings-info-action">
                                                        <span class="settings-info-value">Meari-WiFi-001</span>
                                                        <button type="button" class="settings-action-btn">연결</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>

                                        <section class="settings-section-card">
                                            <header class="settings-section-header">
                                                <i class="fas fa-chart-bar"></i>
                                                <h6>리소스 정보</h6>
                                            </header>
                                            <div class="settings-section-body">
                                                <div class="settings-resource-row">
                                                    <span class="settings-resource-label">CPU 사용량</span>
                                                    <div class="settings-progress-wrapper">
                                                        <div class="settings-progress-container">
                                                            <div class="settings-progress-bar" style="width: 74%;"></div>
                                                        </div>
                                                        <span class="settings-progress-percent">74%</span>
                                                    </div>
                                                </div>
                                                <div class="settings-resource-row">
                                                    <span class="settings-resource-label">메모리 사용량</span>
                                                    <div class="settings-progress-wrapper">
                                                        <div class="settings-progress-container">
                                                            <div class="settings-progress-bar" style="width: 34%;"></div>
                                                        </div>
                                                        <span class="settings-progress-percent">34%</span>
                                                    </div>
                                                </div>
                                                <div class="settings-resource-row">
                                                    <span class="settings-resource-label">저장공간 사용량</span>
                                                    <div class="settings-progress-wrapper">
                                                        <div class="settings-progress-container">
                                                            <div class="settings-progress-bar" style="width: 79%;"></div>
                                                        </div>
                                                        <span class="settings-progress-percent">79%</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>

                                        <section class="settings-section-card">
                                            <header class="settings-section-header">
                                                <i class="fas fa-user"></i>
                                                <h6>사용자 정보</h6>
                                            </header>
                                            <div class="settings-section-body">
                                                <div class="settings-info-row">
                                                    <span class="settings-info-label">접속자 정보</span>
                                                    <span class="settings-info-value">메아리</span>
                                                </div>
                                                <div class="settings-info-row">
                                                    <span class="settings-info-label">서버주소</span>
                                                    <div class="settings-info-action">
                                                        <span class="settings-info-value">192.168.0.1</span>
                                                        <button type="button" class="settings-action-btn">연결</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </section>
                                    </div>

                                </div>

                                <!-- 방송데이터 관리 탭 데이터-->
                                <div class="tab-pane fade" id="tab-v-3" role="tabpanel" aria-labelledby="tab-v-3-tab">
                                    <div class="broadcast-manage-body">
                                        <div class="broadcast-manage-list-container">

                                            <div class="broadcast-manage-item">
                                                <div>
                                                    <div class="broadcast-manage-col-time">
                                                        2025년 11월 12일 오후 1시 30분
                                                    </div>
                                                    <div class="broadcast-manage-col-duration">
                                                        <i class="fas fa-sync-alt"></i>
                                                        1분 30초
                                                    </div>
                                                </div>
                                                <div class="broadcast-manage-col-message">
                                                    <i class="fas fa-volume-down"></i>
                                                    생존자가 있으면 소리를 질러주세요.
                                                </div>
                                                <button type="button"
                                                        class="broadcast-manage-btn-edit"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#editBroadcastModal"
                                                >
                                                    수정
                                                </button>
                                            </div>

                                            <div class="broadcast-manage-item">
                                                <div>
                                                    <div class="broadcast-manage-col-time">
                                                        2025년 11월 12일 오후 1시 30분
                                                    </div>
                                                    <div class="broadcast-manage-col-duration">
                                                        <i class="fas fa-sync-alt"></i> 1분 30초
                                                    </div>
                                                </div>
                                                <div class="broadcast-manage-col-message">
                                                    <i class="fas fa-volume-down"></i> 방송이 들리면 소리를 내주세요.
                                                </div>
                                                <button type="button"
                                                        class="broadcast-manage-btn-edit"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#editBroadcastModal"
                                                >
                                                    수정
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>
    </div>

    @@include('./include/_footer.html')

    <div id="overlayer">
        <div class="loader-overlay">
            <div class="dm-spin-dots spin-lg">
                <span class="spin-dot badge-dot dot-primary"></span>
                <span class="spin-dot badge-dot dot-primary"></span>
                <span class="spin-dot badge-dot dot-primary"></span>
                <span class="spin-dot badge-dot dot-primary"></span>
            </div>
        </div>
    </div>
    <div class="overlay-dark-sidebar"></div>
    <div class="customizer-overlay"></div>

    <!-- 페어링 모달-->
    <div class="modal fade" id="pairingModal" tabindex="-1" aria-labelledby="pairingModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content pairing-modal-content">

                <div class="pairing-modal-header">
                    <i class="fas fa-link pairing-header-icon"></i>
                    <h5 class="pairing-header-title" id="pairingModalLabel">
                        페어링
                    </h5>
                    <p class="pairing-header-subtitle">
                        페어링을 연결할 기기를 선택해주세요.
                    </p>
                </div>

                <div class="modal-body pairing-modal-body">
                    <div class="pairing-diagram-container">

                        <div class="pairing-node">
                            <div class="pairing-icon-wrapper">
                                <i class="fas fa-broadcast-tower"></i>
                            </div>
                            <span class="pairing-node-label">센서</span>
                        </div>

                        <div class="pairing-dotted-line"></div>

                        <div class="pairing-node">
                            <div class="pairing-icon-wrapper">
                                <i class="fas fa-hdd"></i>
                            </div>
                            <span class="pairing-node-label">통신단말기</span>
                            <button type="button" class="pairing-btn">
                                연결
                            </button>
                        </div>

                        <div class="pairing-dotted-line"></div>

                        <div class="pairing-node">
                            <div class="pairing-icon-wrapper">
                                <i class="fas fa-server"></i>
                            </div>
                            <span class="pairing-node-label">서버</span>
                            <button type="button" class="pairing-btn">
                                연결됨
                            </button>
                        </div>

                    </div>
                </div>

                <div class="modal-footer pairing-modal-footer">
                    <button type="button" class="btn-pairing-cancel" data-bs-dismiss="modal">
                        취소
                    </button>
                    <button type="button" class="btn-pairing-save">
                        저장
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 방송데이터 관리 모달-->
    <div class="modal fade" id="editBroadcastModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content edit-modal-content">

                <div class="edit-modal-header">
                    <i class="fas fa-bullhorn edit-header-icon"></i>
                    <h5 class="edit-header-title" id="editModalLabel">
                        방송데이터 수정
                    </h5>
                    <p class="edit-header-subtitle">
                        방송 데이터의 삭제 또는 고정하여 삭제방지를 설정하세요.
                    </p>
                </div>

                <div class="modal-body edit-modal-body">
                    <div id="edit-modal-time" class="edit-modal-line"></div>
                    <div id="edit-modal-duration" class="edit-modal-line"></div>
                    <div id="edit-modal-message" class="edit-modal-line"></div>
                </div>

                <div class="modal-footer edit-modal-footer">
                    <button type="button" class="btn-edit-cancel" data-bs-dismiss="modal">
                        취소
                    </button>
                    <button type="button" class="btn-edit-pin">
                        <i class="fas fa-thumbtack"></i>
                        고정
                    </button>
                    <button type="button" class="btn-edit-delete">
                        삭제
                    </button>
                </div>
            </div>
        </div>
    </div>

</main>

@@include('./include/_scripts.html')

<script src="assets/theme_assets/js/map.js"></script>
<script>
    const editBroadcastModal = document.getElementById('editBroadcastModal');

    if (editBroadcastModal) {
        // 모달이 열리기 '직전'에 발생하는 이벤트
        editBroadcastModal.addEventListener('show.bs.modal', function (event) {

            // 클릭된 '수정' 버튼(event.relatedTarget)을 찾기
            const triggerButton = event.relatedTarget;

            // 버튼의 가장 가까운 부모인 '.broadcast-manage-item'을 찾기
            const item = triggerButton.closest('.broadcast-manage-item');

            if (item) {
                // 부모 아이템 내부에서 데이터 소스를 찾고 innerHTML을 사용해 아이콘까지 그대로 복사
                const timeData = item.querySelector('.broadcast-manage-col-time').textContent.trim();
                const durationData = item.querySelector('.broadcast-manage-col-duration').innerHTML.trim();
                const messageData = item.querySelector('.broadcast-manage-col-message').innerHTML.trim();
                const modalTime = editBroadcastModal.querySelector('#edit-modal-time');
                const modalDuration = editBroadcastModal.querySelector('#edit-modal-duration');
                const modalMessage = editBroadcastModal.querySelector('#edit-modal-message');

                // 모달에 데이터를 삽입
                modalTime.textContent = timeData; // 시간은 텍스트만
                modalDuration.innerHTML = durationData; // 아이콘 포함
                modalMessage.innerHTML = messageData; // 아이콘 포함
            }
        });
    }
</script>
</body>

</html>